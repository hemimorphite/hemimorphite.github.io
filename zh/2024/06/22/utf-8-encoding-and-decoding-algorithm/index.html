<!DOCTYPE html>
<html lang="en">
	<head>
		
		
	    <meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	    <meta name="description" content="UTF-8 encoding and decoding algorithm is crucial for processing text in various programming languages. This page explains the implementation of UTF-8 encoding and decoding with examples for programmers to understand and utilize effectively.">
	    <meta name="author" content="Samuel Yang">
	    <link rel="canonical" href="https://hemimorphite.github.io/zh/2024/06/22/utf-8-encoding-and-decoding-algorithm/">
	    <link rel="icon" type="image/x-icon" href="https://hemimorphite.github.io/zh/favicon.ico">
	    <meta property="fb:app_id" content="771418017802270">
		<meta property="og:title" content="UTF-8 Encoding and Decoding Algorithm">
		<meta property="og:type" content="article">
		<meta property="og:site_name" content="Hemimorphite">
		<meta property="og:url" content="https://hemimorphite.github.io/zh/2024/06/22/utf-8-encoding-and-decoding-algorithm/">
		<meta property="og:description" content="UTF-8 encoding and decoding algorithm is crucial for processing text in various programming languages. This page explains the implementation of UTF-8 encoding and decoding with examples for programmers to understand and utilize effectively.">
		<meta property="og:image" content="https://hemimorphite.github.io/assets/images/unicode.jpg">

		<meta name="twitter:card" content="summary">
		<meta name="twitter:title" content="UTF-8 Encoding and Decoding Algorithm">
		<meta name="twitter:description" content="UTF-8 encoding and decoding algorithm is crucial for processing text in various programming languages. This page explains the implementation of UTF-8 encoding and decoding with examples for programmers to understand and utilize effectively.">
		<meta name="twitter:creator" content="Samuel Yang">
		<meta name="twitter:image:src" content="https://hemimorphite.github.io/assets/images/unicode.jpg">
	
	    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&display=swap" rel="stylesheet">

	    <title>UTF-8 Encoding and Decoding Algorithm</title>

	    <!-- Bootstrap core CSS -->
	    <link rel="stylesheet" href="https://hemimorphite.github.io/assets/vendor/bootstrap/css/bootstrap.css">

	    <!-- Additional CSS Files -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-wcIxkf4k558AjM3Yz3BBFQUbk/zgIYC2R0QpeeYb+TwlBVMrlgLqwRjRtGZiK7ww" crossorigin="anonymous">
		<link rel="stylesheet" href="https://hemimorphite.github.io/assets/vendor/highlight.js/css/default.min.css">
	    <link rel="stylesheet" href="https://hemimorphite.github.io/assets/vendor/highlight.js/css/themes/monokai-sublime.css">
	    <link rel="stylesheet" href="https://hemimorphite.github.io/assets/css/fontawesome.css">
	    <link rel="stylesheet" href="https://hemimorphite.github.io/assets/css/hemimorphite.css">
  	</head>

  	<body>
  		<!-- ***** Preloader Start ***** -->
	    <!--<div id="preloader">
	        <div class="jumper">
	            <div></div>
	            <div></div>
	            <div></div>
	        </div>
	    </div>-->  
	    <!-- ***** Preloader End ***** -->
	    
	    <!-- Header -->
	    <header>
			<nav class="navbar navbar-expand-lg">
				<div class="container">
					<h2 class="navbar-brand"><a href="https://hemimorphite.github.io/zh/">Hemimorphite</a></h2>
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
						<span class="icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarResponsive">
						<ul class="navbar-nav ms-auto">
							<li class="nav-item ">
								<a class="nav-link" href="https://hemimorphite.github.io/zh/">Home
									
								</a>
							</li>
						
						
						
						

						
						
						

						
						  	
						  	<li class="nav-item ">
								<a class="nav-link" href="https://hemimorphite.github.io/zh/about">About
									
								</a>
							</li>
						  	
						  	
						
						
						

						
						
						

						
						
						

						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						

						
						  	
						  	
						
						
						</ul>
					</div>
				</div>
			</nav>
	    </header>
	    
		<section>
			<div class="container">
				<div class="row">
					<div class="col-12">
						<script type="text/javascript">
							atOptions = {
								'key' : '9cf40e8a46ab80f525196d3376630858',
								'format' : 'iframe',
								'height' : 90,
								'width' : 728,
								'params' : {}
							};
						</script>
						<script type="text/javascript" src="//www.topcreativeformat.com/9cf40e8a46ab80f525196d3376630858/invoke.js"></script>
					</div>
				</div>
			</div>
		</section>

	    <!-- Page Content -->
<section>
	<div class="container">
		<div class="row">
			<div class="col-12">
				<script type="text/javascript">
					atOptions = {
						'key' : '9cf40e8a46ab80f525196d3376630858',
						'format' : 'iframe',
						'height' : 90,
						'width' : 728,
						'params' : {}
					};
				</script>
				<script type="text/javascript" src="//www.topcreativeformat.com/9cf40e8a46ab80f525196d3376630858/invoke.js"></script>
			</div>
			<div class="col-lg-2">
				<a href="https://hemimorphite.github.io/zh/" type="button" class="btn btn-all ms-auto"><i class="fa-solid fa-arrow-left"></i> All posts</a>

				<div>
					<script type="text/javascript">
						atOptions = {
							'key' : '038e6b1f96b2e2f8ee26abfaebf2b477',
							'format' : 'iframe',
							'height' : 300,
							'width' : 160,
							'params' : {}
						};
					</script>
					<script type="text/javascript" src="//www.topcreativeformat.com/038e6b1f96b2e2f8ee26abfaebf2b477/invoke.js"></script>
				</div>
				<div>
					<script type="text/javascript">
						atOptions = {
							'key' : '49182664b5d567ebee9725d9737c0006',
							'format' : 'iframe',
							'height' : 600,
							'width' : 160,
							'params' : {}
						};
					</script>
					<script type="text/javascript" src="//www.topcreativeformat.com/49182664b5d567ebee9725d9737c0006/invoke.js"></script>
				</div>
				<div>
					<script type="text/javascript">
						atOptions = {
							'key' : '038e6b1f96b2e2f8ee26abfaebf2b477',
							'format' : 'iframe',
							'height' : 300,
							'width' : 160,
							'params' : {}
						};
					</script>
					<script type="text/javascript" src="//www.topcreativeformat.com/038e6b1f96b2e2f8ee26abfaebf2b477/invoke.js"></script>
				</div>
				<div>
					<script type="text/javascript">
						atOptions = {
							'key' : '49182664b5d567ebee9725d9737c0006',
							'format' : 'iframe',
							'height' : 600,
							'width' : 160,
							'params' : {}
						};
					</script>
					<script type="text/javascript" src="//www.topcreativeformat.com/49182664b5d567ebee9725d9737c0006/invoke.js"></script>
				</div>
			</div>
			<div class="col-lg-10">
				<div class="blog-post">
    <h2 class="post-title">UTF-8 Encoding and Decoding Algorithm</h2>
<div class="post-author">
    <span class="avatar"></span>
    <span class="info"><span class="date">Published June 22, 2024</span><br><span class="name">By Samuel Yang</span></span>
</div>

<figure class="post-image">
    <img src="/assets/images/unicode.jpg" alt="Blog Cover">
</figure>

    <article class="post-content">
        <p>In computer systems, characters are transformed and stored as numbers (sequences of bits) that can be handled by the processor. A code page is an encoding scheme that maps a specific sequence of bits to its character representation. Before Unicode, there were hundreds of different encoding schemes that assigned a number to each letter or character. Many such schemes included code pages that contained only 256 characters – each character requiring 8 bits of storage. While this was relatively compact, it was insufficient to hold ideographic character sets containing thousands of characters such as Chinese and Japanese, and also did not allow the character sets of many languages to co-exist with each other.</p>

        <p>Unicode is an attempt to include all the different schemes into one universal text-encoding standard.</p>

        <p>Unicode represents each individual character as a unique code point with a unique number. For example, the character <b>A</b> – <b>Latin Capital Letter A</b> – is represented as <b>U+0041</b> and the Hiragana <b>ふ</b> is <b>U+3075</b></p>

        <p>An individual Unicode code point is expressed as <b>U+n</b>, where <b>n</b> is four to six hexadecimal digits, using the digits <b>0–9</b> and uppercase letters <b>A–F</b> (for 10 through 15, respectively). Leading zeros are omitted, unless the code point would have fewer than four hexadecimal digits. For example, <b>U+0001</b>, <b>U+0012</b>, <b>U+0123</b>, <b>U+1234</b>, <b>U+12345</b>, <b>U+102345</b>.</p>

        <p>Unicode also defines multiple encodings of its single character set: <b>UTF-8</b>, <b>UTF-16</b>, and <b>UTF-32</b>.</p>

        <h5 class="post-subtitle">UTF-8 Encoding</h5>

        <p>UTF-8 is a character encoding that maps code points of Unicode character to a sequence of one, two, three or four 8-bit code units. UTF-8 uses 1, 2, 3 or 4 8-bit code units to represent a unicode character.</p>

        <p>Code unit is a value that encoded code point to 8/16/32 bits to store/transmit Unicode text efficiently on a computer.</p>
        
        <p>When representing characters in UTF-8, each code point is represented by a sequence of one or more bytes. The number of bytes used depends on the code point being represented by the character. Here's a breakdown of the usage range:</p>

        <ul>
            <li>code points in the ASCII range <b>U+0000 - U+007F (0-127)</b> are represented by a single byte</li>
            <li>code points in the range <b>U+0080 - U+07FF (128-2047)</b> are represented by two bytes</li>
            <li>code points in the range <b>U+0800 - U+FFFF (2048-65535)</b> are represented by three bytes</li>
            <li>code points in the range <b>U+010000 - U+10FFFF (65536-1114111)</b> are represented by four bytes</li>
        </ul>

        <p>In the following table, the x characters are replaced by the bits of the code point:</p>

        <table class="table table-bordered border-primary">
            <tbody>
                <tr>
                    <th>First code point </th>
                    <th>Last code point </th>
                    <th>Byte 1 </th>
                    <th>Byte 2 </th>
                    <th>Byte 3 </th>
                    <th>Byte 4 </th>
                </tr>
                <tr>
                    <td style="text-align: right;">
                        U+00<span style="color:red;">0</span><span style="color:purple;">0</span>
                    </td>
                    <td style="text-align: right;">
                        U+00<span style="color:red;">7</span><span style="color:purple;">F</span>
                    </td>
                    <td>
                        0<span style="color:red;">xxx</span><span style="color:purple;">xxxx</span>
                    </td>
                    <td style="background: darkgray;" colspan="3"></td>
                </tr>
                <tr>
                    <td style="text-align: right;">
                        U+0<span style="color:green;">0</span><span style="color:red;">8</span><span style="color:purple;">0</span>
                    </td>
                    <td style="text-align: right;">
                        U+0<span style="color:green;">7</span><span style="color:red;">F</span><span style="color:purple;">F</span>
                    </td>
                    <td>
                        110<span style="color:green;">xxx</span><span style="color:red;">xx</span>
                    </td>
                    <td>
                        10<span style="color:red;">xx</span><span style="color:purple;">xxxx</span>
                    </td>
                    <td style="background: darkgray;" colspan="2"></td>
                </tr>
                <tr>
                    <td style="text-align: right;">
                        U+<span style="color:blue;">0</span><span style="color:green;">8</span><span style="color:red;">0</span><span style="color:purple;">0</span>
                    </td>
                    <td style="text-align: right;">
                        U+<span style="color:blue;">F</span><span style="color:green;">F</span><span style="color:red;">F</span><span style="color:purple;">F</span>
                    </td>
                    <td>
                        1110<span style="color:blue;">xxxx</span>
                    </td>
                    <td>
                        10<span style="color:green;">xxxx</span><span style="color:red;">xx</span>
                    </td>
                    <td>
                        10<span style="color:red;">xx</span><span style="color:purple;">xxxx</span>
                    </td>
                    <td style="background: darkgray;"></td>
                </tr>
                <tr>
                    <td style="text-align: right;">
                        U+<span style="color:crimson;">0</span><span style="color:orange;">1</span><span style="color:blue;">0</span><span style="color:green;">0</span><span style="color:red;">0</span><span style="color:purple;">0</span>
                    </td>
                    <td style="text-align: right;">
                        U+<span style="color:crimson;">1</span><span style="color:orange;">0</span><span style="color:blue;">F</span><span style="color:green;">F</span><span style="color:red;">F</span><span style="color:purple;">F</span>
                    </td>
                    <td>
                        11110<span style="color:crimson;">x</span><span style="color:orange;">xx</span>
                    </td>
                    <td>
                        10<span style="color:orange;">xx</span><span style="color:blue;">xxxx</span>
                    </td>
                    <td>
                        10<span style="color:green;">xxxx</span><span style="color:red;">xx</span>
                    </td>
                    <td>
                        10<span style="color:red;">xx</span><span style="color:purple;">xxxx</span>
                    </td>
                </tr>
            </tbody>
        </table>

        <p>The algorithm to convert a unicode code point to UTF-8 sequence is as follows:</p>

        <ol>
            <li>If the code point is less than <b>U+0080</b> or between <b>U+0000</b> and <b>U+007F</b>, it is encoded in a single byte.<br>
                <ul>
                    <li><b>Step 1</b>: get the first byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: perform <b>right shift</b> operation on the code point by <b>0</b> bit</li>
                            <li><b>Substep 2</b>: perform masking using <b>AND</b> operator between the result of substep 1 with <b>0x7F (0b01111111)</b> to extract the 7 bits in the result of step 1</li>
                            <li><b>Substep 3</b>: perform masking using <b>OR</b> operator between the result of substep 2 with 0</li>
                            <li><b>Substep 4</b>: the first byte of UTF-8 sequence is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Final step</b>: the UTF-8 sequence is the result of step 1</li>
                </ul>
                <br>
                For example, encoding the character <b>$</b> (U+0024):<br>
                <ul>
                    <li><b>Step 1</b>: get the first byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: 0x24 >> 0 = 0x80</li>
                            <li><b>Substep 2</b>: 0x24 & 0x7F = 0x24</li>
                            <li><b>Substep 3</b>: 0x24 | 0x0 = 0x24</li>
                            <li><b>Substep 4</b>: first byte of UTF-8 sequence = 0x24</li>
                        </ul>
                    </li>
                    <li><b>Final step</b>: the UTF-8 sequence of the character <b>$</b> (U+0024) is 0x24</li>
                </ul>
                <br>
                As you can see, for a single-byte UTF-8 sequence, the first byte is the code point itself.
            </li>
            <li>If the code point is less than U+0800 or between U+0080 and U+07FF, it is encoded in two bytes.<br>
                <ul>
                    <li><b>Step 1</b>: get the first byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: perform right shift operation on the code point by 6 bits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the result of substep 1 with 0x1F (0b00011111) to extract the trailing 5 bits of the result of substep 1</li>
                            <li><b>Substep 3</b>: perform masking using OR operator between the result of substep 2 with 0xC0 (0b11000000) to add the leading 3 bits (i.e. 110) to the result of substep 2</li>
                            <li><b>Substep 4</b>: the first byte of UTF-8 sequence is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Step 2</b>: get the second byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: perform right shift operation on the code point by 0 bit</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the result of <b>Substep 1</b> with 0x3F (0b00111111) to extract the trailing 6 bits in the result of substep 1</li>
                            <li><b>Substep 3</b>: perform masking using OR operator between the result of <b>Substep 2</b> with 0x80 (0b11000000) to add leading 2 bits (i.e. 10) to the result of substep 2</li>
                            <li><b>Substep 4</b>: the second byte of UTF-8 sequence is the result of substep 3</li>
                        </ul>
                    </li>
                    <li>
                        <b>Final step</b>: combine the result of step 1 and the result of step 2 to form a UTF-8 sequence.
                    </li>
                </ul>
                
                <br>
                For example, encoding the Character <b>ü</b> (U+00FC):<br>

                <ul>
                    <li><b>Step 1</b>: get the first byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: 0xfc >> 6 = 0x03</li>
                            <li><b>Substep 2</b>: 0x03 & 0x1f = 0x03</li>
                            <li><b>Substep 3</b>: 0x03 | 0xc0 = 0xc3</li>
                            <li><b>Substep 4</b>: first byte of UTF-8 sequence = 0xc3</li>
                        </ul>
                    </li>
                    <li><b>Step 2</b>: get the second byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: 0xfc >> 0 = 0xfc</li>
                            <li><b>Substep 2</b>: 0xfc & 0x3f = 0x3c</li>
                            <li><b>Substep 3</b>: 0x3c | 0x80 = 0xbc</li>
                            <li><b>Substep 3</b>: second byte of UTF-8 sequence = 0xbc</li>
                        </ul>
                    </li>
                    <li><b>Final step</b>: the UTF-8 sequence of the character <b>ü</b> (U+00FC) is 0xc3bc</li>
                </ul>
            </li>
            <li>If the code point is less than U+010000 or between U+0800 and U+FFFF, it is encoded in three bytes.<br>
                <ul>
                    <li><b>Step 1</b>: get the first byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: perform the right shift operation on the code point by 12 bits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the result of <b>Substep 1</b> with 0x0F  (0b00001111) to extract the trailing 4 bits of the result of substep 1</li>
                            <li><b>Substep 3</b>: perform masking using OR operator between the result of <b>Substep 2</b> with 0xE0 (0b11100000) to add the leading 4 bits (i.e. 1110) to the result of substep 2</li>
                            <li><b>Substep 4</b>: the first byte of UTF-8 sequence is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Step 2</b>: get the second byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: perform right shift operation on the code point by 6 bits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the result of <b>Substep 1</b> with 0x3F (0b00111111) to extract the trailing 6 bits in the result of substep 1</li>
                            <li><b>Substep 3</b>: perform masking using OR operator between the result of <b>Substep 2</b> with 0x80 (0b11000000) to add leading 2 bits (i.e. 10) to the result of substep 2</li>
                            <li><b>Substep 4</b>: the second byte of UTF-8 sequence is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Step 3</b>: get the third byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: perform right shift operation on the code point by 0 bit</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the result of <b>Substep 1</b> with 0x3F (0b00111111) to extract the trailing 6 bits in the result of substep 1</li>
                            <li><b>Substep 3</b>: perform masking using OR operator between the result of <b>Substep 2</b> with 0x80 (0b11000000) to add leading 2 bits (i.e. 10) to the result of substep 2</li>
                            <li><b>Substep 4</b>: the third byte of UTF-8 sequence is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Final step</b>: combine the first byte, second byte and the third byte to form a UTF-8 sequence</li>
                </ul>
                
                <br>
                For example, encoding the Character <b>€</b> (U+20AC):<br>

                <ul>
                    <li><b>Step 1</b>: get the first byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: 0x20ac >> 12 = 0x02</li>
                            <li><b>Substep 2</b>: 0x02 & 0xf = 0x02</li>
                            <li><b>Substep 3</b>: 0x02 | 0xe0 = 0xe2</li>
                            <li><b>Substep 4</b>: first byte of UTF-8 sequence = 0xe2</li>
                        </ul>
                    </li>
                    <li><b>Step 2</b>: get the second byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: 0x20ac >> 6 = 0x82</li>
                            <li><b>Substep 2</b>: 0x82 & 0x3f = 0x02</li>
                            <li><b>Substep 3</b>: 0x02 | 0x80 = 0x82</li>
                            <li><b>Substep 4</b>: second byte of UTF-8 sequence = 0x82</li>
                        </ul>
                    </li>
                    <li><b>Step 3</b>: get the third byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: 0x20ac >> 0 = 0x20ac</li>
                            <li><b>Substep 2</b>: 0x20ac & 0x3f = 0x2c</li>
                            <li><b>Substep 3</b>: 0x2c | 0x80 = 0xac</li>
                            <li><b>Substep 4</b>: third byte of UTF-8 sequence = 0xac</li>
                        </ul>
                    </li>
                    <li><b>Final step</b>: the UTF-8 sequence of the character <b>€</b> (U+20AC) is 0xe282ac</li>
                </ul>
            </li>
            <li>If the code point is less than U+110000 or between U+010000 and U+10FFFF, it is encoded in four bytes.<br>
                <ul>
                    <li><b>Step 1</b>: get the first byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: perform right shift operation on the code point by 18 bits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the result of <b>Substep 1</b> with 0x07  (0b00000111) to extract the trailing 3 bits of the result of substep 1</li>
                            <li><b>Substep 3</b>: perform masking using OR operator between the result of <b>Substep 2</b> with 0xF0 (0b11110000) to add the leading 5 bits (i.e. 11110) to the result of substep 2</li>
                            <li><b>Substep 4</b>: the first byte of UTF-8 sequence is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Step 2</b>: get the second byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: perform right shift operation on the code point by 12 bits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the result of <b>Substep 1</b> with 0x3F (0b00111111) to extract the trailing 6 bits in the result of substep 1</li>
                            <li><b>Substep 3</b>: perform masking using OR operator between the result of <b>Substep 2</b> with 0x80 (0b11000000) to add leading 2 bits (i.e. 10) to the result of substep 2</li>
                            <li><b>Substep 4</b>: the second byte of UTF-8 sequence is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Step 3</b>: get the third byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: perform right shift operation on the code point by 6 bits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the result of <b>Substep 1</b> with 0x3F (0b00111111) to extract the trailing 6 bits in the result of substep 1</li>
                            <li><b>Substep 3</b>: perform masking using OR operator between the result of <b>Substep 2</b> with 0x80 (0b11000000) to add leading 2 bits (i.e. 10) to the result of substep 2</li>
                            <li><b>Substep 4</b>: the third byte of UTF-8 sequence is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Step 4</b>: get the fourth byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: perform right shift operation on the code point by 0 bit</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the result of <b>Substep 1</b> with 0x3F (0b00111111) to extract the trailing 6 bits in the result of substep 1</li>
                            <li><b>Substep 3</b>: perform masking using OR operator between the result of <b>Substep 2</b> with 0x80 (0b11000000) to add leading 2 bits (i.e. 10) to the result of substep 2</li>
                            <li><b>Substep 4</b>: the fourth byte of UTF-8 sequence is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Final step</b>: combine the first byte, second byte third byte, and the forth byte to form a UTF-8 sequence</li>
                </ul>
                
                <br>
                For example, encoding the Character <b>😀</b> (U+1F600):<br>
                <ul>
                    <li><b>Step 1</b>: get the first byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: 0x1f600 >> 18 = 0x0</li>
                            <li><b>Substep 2</b>: 0x0 & 0x07 = 0x0</li>
                            <li><b>Substep 3</b>: 0x0 | 0xf0 = 0xf0</li>
                            <li><b>Substep 4</b>: first byte of UTF-8 sequence = 0xf0</li>
                        </ul>
                    </li>
                    <li><b>Step 2</b>: get the second byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: 0x1f600 >> 12 = 0x1f</li>
                            <li><b>Substep 2</b>: 0x1f & 0x3f = 0x1f</li>
                            <li><b>Substep 3</b>: 0x1f | 0x80 = 0x9f</li>
                            <li><b>Substep 4</b>: second byte of UTF-8 sequence = 0x9f</li>
                        </ul>
                    </li>
                    <li><b>Step 3</b>: get the third byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: 0x1f600 >> 6 = 0x7d8</li>
                            <li><b>Substep 2</b>: 0x7d8 & 0x3f = 0x18</li>
                            <li><b>Substep 3</b>: 0x18 | 0x80 = 0x98</li>
                            <li><b>Substep 4</b>: third byte of UTF-8 sequence = 0x98</li>
                        </ul>
                    </li>
                    <li><b>Step 4</b>: get the fourth byte of UTF-8 sequence<br>
                        <ul>
                            <li><b>Substep 1</b>: 0x1f600 >> 0 = 0x1f600</li>
                            <li><b>Substep 2</b>: 0x1f600 & 0x3f = 0x0</li>
                            <li><b>Substep 3</b>: 0x0 | 0x80 = 0x80</li>
                            <li><b>Substep 4</b>: fourth byte of UTF-8 sequence = 0x80</li>
                        </ul>
                    </li>
                    <li><b>Final step</b>: the UTF-8 sequence of the character <b>😀</b> (U+1F600) is 0xf09f9880</li>
                </ul>  
            </li>
        </ol>

        <p>The following table summarizes the conversion code points to UTF-8 sequence:</p>

        <table class="table table-bordered border-primary">
            <tbody>
                <tr>
                    <th colspan="2">Character</th>
                    <th>Binary code point</th>
                    <th>Binary UTF-8</th>
                    <th>Hex UTF-8 </th>
                </tr>
                <tr>
                    <td>
                        $
                    </td>
                    <td align="right">
                        U+0024
                    </td>
                    <td align="right">
                        <span style="color:red;">010 0100</span>
                    </td>
                    <td align="left">
                        0<span style="color:red;">0100100</span>
                    </td>
                    <td align="left">
                        <span style="color:red;">24</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        ü
                    </td>
                    <td align="right">
                        U+00FC
                    </td>
                    <td align="right">
                        <span style="color:green;">000 11</span><span style="color:red;">11 1100</span>
                    </td>
                    <td align="left">
                        110<span style="color:green;">00011</span> 
                        10<span style="color:red;">111100</span>
                    </td>
                    <td align="left">
                        <span style="color:green;">C3</span>
                        <span style="color:red;">BC</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        €
                    </td>
                    <td align="right">
                        U+20AC
                    </td>
                    <td align="right">
                        <span style="color:blue;">0010</span><span style="color:green;">0000 10</span><span style="color:red;">10 1100</span>
                    </td>
                    <td align="left">
                        1110<span style="color:blue;">0010</span>
                        10<span style="color:green;">000010</span>
                        10<span style="color:red;">101100</span>
                    </td>
                    <td align="left">
                        <span style="color:blue;">E2</span>
                        <span style="color:green;">82</span>
                        <span style="color:red;">AC</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        😀
                    </td>
                    <td align="right">
                        U+1F600
                    </td>
                    <td align="right">
                        <span style="color: #C000C0;">0 01</span><span style="color:blue;">11 1101</span><span style="color:green;">1000 00</span><span style="color:red;">00 0000</span>
                    </td>
                    <td align="left">
                        11110<span style="color: #C000C0;">001</span>
                        10<span style="color:blue;">111101</span> 
                        10<span style="color:green;">100000</span> 
                        10<span style="color:red;">000000</span>
                    </td>
                    <td align="left">
                        <span style="color: #C000C0;">F0</span>
                        <span style="color:blue;">9F</span>
                        <span style="color:green;">98</span>
                        <span style="color:red;">80</span>
                    </td>
                </tr>
            </tbody>
        </table>

        <h5 class="post-subtitle">UTF-8 Decoding</h5>

        <p>The algorithm to convert UTF-8 sequence to a unicode code point is as follows:</p>

        <ul>
            <li>If the first byte of UTF-8 sequence is between 0x0 and 0x7F, the length of the UTF-8 sequence is a single byte. The maximum number of bits in a byte is 8 bits and is represented as two hexadecimal digits.<br>
                <ul>
                    <li><b>Step 1</b>: decode the first byte<br>
                        <ul>
                            <li><b>Substep 1</b>: represent the first byte of the UTF-8 sequence as two hexadecimal digits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the first byte UTF-8 sequence with 0x7F (0b01111111) to extract the trailing 7 bits of the first byte UTF-8 sequence</li>
                            <li><b>Substep 3</b>: perform lef shift on the result of <b>Substep 2</b> by 0 bit</li>
                            <li><b>Substep 4</b>: the decoded first byte is the result of substep 3</li>
                        </ul>
                    </li>
                    <li>
                        <b>Final step</b>: the code point of the UTF-8 sequence is the result of step 1
                    </li>
                </ul>
                
                <br>
                For example, decoding the UTF-8 sequence 0x24:<br>
                <ul>
                    <li><b>Step 1</b>: decode the first byte<br>
                        <ul>
                            <li><b>Substep 1</b>: the first byte of the UTF-8 sequence = 0x24</li>
                            <li><b>Substep 2</b>: 0x24 & 0x7f = 0x24</li>
                            <li><b>Substep 3</b>: 0x24 <<  0 = 0x24</li>
                            <li><b>Substep 4</b>: the decoded first byte = 0x24</li>
                        </ul>
                    </li>
                    <li><b>Final step</b>: the code point of the UTF-8 sequence 0x24 is U+0024</li>
                </ul>
                <br>
                As you can see, for a single-byte UTF-8 sequence, the first byte is the code point itself.
            </li>
            <li>If the first byte of UTF-8 sequence is between 0xC0 and 0xDF, the length of the UTF-8 sequence is two bytes. The maximum number of bits in two bytes is 16 bits and is represented as four hexadecimal digits.<br>
                <ul>
                    <li><b>Step 1</b>: decode the first byte<br>
                        <ul>
                            <li><b>Substep 1</b>: represent the first byte of the UTF-8 sequence as four hexadecimal digits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the first byte UTF-8 sequence with 0x1F (0b00011111) to extract the trailing 5 bits of the first byte UTF-8 sequence</li>
                            <li><b>Substep 3</b>: do the shift left the result of step 2 by 6 bits</li>
                            <li><b>Substep 4</b>: the decoded first byte is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Step 2</b>: decode the second byte<br>
                        <ul>
                            <li><b>Substep 1</b>: represent the first byte of the UTF-8 sequence as four hexadecimal digits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the second byte UTF-8 sequence with 0x3F (0b00111111) to extract the trailing 6 bits of the second byte UTF-8 sequence</li>
                            <li><b>Substep 3</b>: perform shift left the result of step 2 by 0 bit</li>
                            <li><b>Substep 4</b>: the decoded second byte is the result of substep 3</li>
                        </ul>
                    </li>
                    <li>
                        <b>Step 3</b>: perform the OR operation among the result of step 1 and the result of step 2 to get the code point value.
                    </li>
                    <li>
                        <b>Final step</b>: the code point of UTF-8 sequence is the result of step 3
                    </li>
                </ul>

                <br>
                For example, decoding the UTF-8 sequence 0xc3bc:<br>

                <ul>
                    <li><b>Step 1</b>: decode the first byte<br>
                        <ul>
                            <li><b>Substep 1</b>: the first byte of the UTF-8 sequence = 0x00c3</li>
                            <li><b>Substep 2</b>: 0x00c3 & 0x1f = 0x0003</li>
                            <li><b>Substep 3</b>: 0x0003 << 6 = 0x00c0</li>
                            <li><b>Substep 4</b>: the decoded first byte is 0x00c0</li>
                        </ul>
                    </li>
                    <li><b>Step 2</b>: decode the second byte<br>
                        <ul>
                            <li><b>Substep 1</b>: the second byte of the UTF-8 sequence = 0x00bc</li>
                            <li><b>Substep 1</b>: 0x00bc & 0x3f = 0x003c</li>
                            <li><b>Substep 2</b>: 0x003c << 0 = 0x003c</li>
                            <li><b>Substep 3</b>: the decoded second byte is 0x003c</li>
                        </ul>
                    </li>
                    <li><b>Step 3</b>: 0x00c0 | 0x003c = 0x00fc</li>
                    <li>
                        <b>Final step</b>: the code point of UTF-8 sequence 0xc3bc is U+00FC
                    </li>
                </ul>
                
            </li>
            <li>If the first byte of UTF-8 sequence is between 0xE0 and 0xEF, the length of the UTF-8 sequence is three bytes. The maximum number of bits in three bytes is 24 bits and is represented as six hexadecimal digits.<br>
                <ul>
                    <li><b>Step 1</b>: decode the first byte<br>
                        <ul>
                            <li><b>Substep 1</b>: represent the first byte of the UTF-8 sequence as six hexadecimal digits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the first byte UTF-8 sequence with 0x0F (0b00001111) to extract the trailing 4 bits of the first byte UTF-8 sequence</li>
                            <li><b>Substep 3</b>: perform shift left the result of step 2 by 12 bits</li>
                            <li><b>Substep 4</b>: the decoded first byte is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Step 2</b>: decode the second byte<br>
                        <ul>
                            <li><b>Substep 1</b>: represent the first byte of the UTF-8 sequence as six hexadecimal digits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the second byte UTF-8 sequence with 0x3F (0b00111111) to extract the trailing 6 bits of the second byte UTF-8 sequence</li>
                            <li><b>Substep 3</b>: perform shift left the result of step 2 by 6 bit</li>
                            <li><b>Substep 4</b>: the decoded second byte is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Step 3</b>: decode the third byte<br>
                        <ul>
                            <li><b>Substep 1</b>: represent the first byte of the UTF-8 sequence as six hexadecimal digits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the third byte UTF-8 sequence with 0x3F (0b00111111) to extract the trailing 6 bits of the third byte UTF-8 sequence</li>
                            <li><b>Substep 3</b>: perform shift left the result of step 2 by 6 bit</li>
                            <li><b>Substep 4</b>: the decoded third byte is the result of substep 3</li>
                        </ul>
                    </li>
                    <li>
                        <b>Step 4</b>: perform the OR operation among the result of step 1, the result of step 2 and the result of the step 3 to get the code point value.
                    </li>
                    <li>
                        <b>Final step</b>: the code point of UTF-8 sequence is the result of step 4
                    </li>
                </ul>

                <br>
                For example, decoding the UTF-8 sequence 0xe282ac:<br>

                <ul>
                    <li><b>Step 1</b>: decode the first byte<br>
                        <ul>
                            <li><b>Substep 1</b>: the first byte of the UTF-8 sequence = 0x0000e2</li>
                            <li><b>Substep 2</b>: 0x0000e2 & 0x0f = 0x000002</li>
                            <li><b>Substep 3</b>: 0x000002 << 12 = 0x002000</li>
                            <li><b>Substep 4</b>: the decoded first byte is 0x002000</li>
                        </ul>
                    </li>
                    <li><b>Step 2</b>: decode the second byte<br>
                        <ul>
                            <li><b>Substep 1</b>: the second byte of the UTF-8 sequence = 0x000082</li>
                            <li><b>Substep 2</b>: 0x000082 & 0x3f = 0x000002</li>
                            <li><b>Substep 3</b>: 0x000002 << 6 = 0x000080</li>
                            <li><b>Substep 4</b>: the decoded second byte is 0x000080</li>
                        </ul>
                    </li>
                    <li><b>Step 3</b>: decode the third byte<br>
                        <ul>
                            <li><b>Substep 1</b>: the third byte of the UTF-8 sequence = 0x0000ac</li>
                            <li><b>Substep 2</b>: 0x0000ac & 0x3f = 0x00002c</li>
                            <li><b>Substep 3</b>: 0x00002c << 0 = 0x00002c</li>
                            <li><b>Substep 4</b>: the decoded second byte is 0x00002c</li>
                        </ul>
                    </li>
                    <li><b>Step 4</b>: 0x002000 | 0x000080 | 0x00002c = 0x0020ac</li>
                    <li>
                        <b>Final step</b>: the code point of UTF-8 sequence 0xc3bc is U+20AC
                    </li>
                </ul>
            </li>
            <li>If the first byte of UTF-8 sequence is between 0xF0 and 0xF7, the length of the UTF-8 sequence is four bytes. The maximum number of bits in four bytes is 32 bits and is represented as eight hexadecimal digits.<br>
                <ul>
                    <li><b>Step 1</b>: decode the first byte<br>
                        <ul>
                            <li><b>Substep 1</b>: represent the first byte of the UTF-8 sequence as eight hexadecimal digits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the first byte UTF-8 sequence with 0x07 (0b00000111) to extract the trailing 3 bits of the first byte UTF-8 sequence</li>
                            <li><b>Substep 3</b>: perform shift left the result of step 2 by 18 bits</li>
                            <li><b>Substep 4</b>: the decoded first byte is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Step 2</b>: decode the second byte<br>
                        <ul>
                            <li><b>Substep 1</b>: represent the second byte of the UTF-8 sequence as eight hexadecimal digits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the second byte UTF-8 sequence with 0x3F (0b00111111) to extract the trailing 6 bits of the second byte UTF-8 sequence</li>
                            <li><b>Substep 3</b>: perform shift left the result of step 2 by 12 bits</li>
                            <li><b>Substep 4</b>: the decoded second byte is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Step 3</b>: decode the third byte<br>
                        <ul>
                            <li><b>Substep 1</b>: represent the third byte of the UTF-8 sequence as eight hexadecimal digits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the third byte UTF-8 sequence with 0x3F (0b00111111) to extract the trailing 6 bits of the third byte UTF-8 sequence</li>
                            <li><b>Substep 3</b>: perform shift left the result of step 2 by 6 bits</li>
                            <li><b>Substep 4</b>: the decoded third byte is the result of substep 3</li>
                        </ul>
                    </li>
                    <li><b>Step 4</b>: decode the fourth byte<br>
                        <ul>
                            <li><b>Substep 1</b>: represent the fourth byte of the UTF-8 sequence as eight hexadecimal digits</li>
                            <li><b>Substep 2</b>: perform masking using AND operator between the fourth byte UTF-8 sequence with 0x3F (0b00111111) to extract the trailing 6 bits of the fourth byte UTF-8 sequence</li>
                            <li><b>Substep 3</b>: perform shift left the result of step 2 by 6 bits</li>
                            <li><b>Substep 4</b>: the decoded fourth byte is the result of substep 3</li>
                        </ul>
                    </li>
                    <li>
                        <b>Step 5</b>: perform the OR operation among the result of step 1, the result of step 2, the result of the step 3 and the result of the step 4 to get the code point value.
                    </li>
                    <li>
                        <b>Final step</b>: the code point of UTF-8 sequence is the result of step 4
                    </li>
                </ul>  
                
                <br>
                For example, decoding the UTF-8 sequence 0xf09f9880:<br>

                <ul>
                    <li><b>Step 1</b>: decode the first byte<br>
                        <ul>
                            <li><b>Substep 1</b>: the first byte of the UTF-8 sequence = 0x000000f0</li>
                            <li><b>Substep 2</b>: 0x000000f0 & 0x07 = 0x00000000</li>
                            <li><b>Substep 3</b>: 0x00000000 << 18 = 0x00000000</li>
                            <li><b>Substep 4</b>: the decoded first byte is 0x00000000</li>
                        </ul>
                    </li>
                    <li><b>Step 2</b>: decode the second byte<br>
                        <ul>
                            <li><b>Substep 1</b>: the second byte of the UTF-8 sequence = 0x0000009f</li>
                            <li><b>Substep 2</b>: 0x0000009f & 0x3f = 0x0000001f</li>
                            <li><b>Substep 3</b>: 0x0000001f << 12 = 0x0001f000</li>
                            <li><b>Substep 4</b>: the decoded second byte is 0x0001f000</li>
                        </ul>
                    </li>
                    <li><b>Step 3</b>: decode the third byte<br>
                        <ul>
                            <li><b>Substep 1</b>: the third byte of the UTF-8 sequence = 0x00000098</li>
                            <li><b>Substep 2</b>: 0x00000098 & 0x3f = 0x00000018</li>
                            <li><b>Substep 3</b>: 0x00000018 << 6 = 0x00000600</li>
                            <li><b>Substep 4</b>: the decoded second byte is 0x00000600</li>
                        </ul>
                    </li>
                    <li><b>Step 4</b>: decode the fourth byte<br>
                        <ul>
                            <li><b>Substep 1</b>: the third byte of the UTF-8 sequence = 0x00000080</li>
                            <li><b>Substep 2</b>: 0x00000080 & 0x3f = 0x00000000</li>
                            <li><b>Substep 3</b>: 0x00000000 << 0 = 0x00000000</li>
                            <li><b>Substep 4</b>: the decoded second byte is 0x00000000</li>
                        </ul>
                    </li>
                    <li><b>Step 5</b>: 0x00000000 | 0x0001f000 | 0x00000600 | 0x00000000 = 0x0001f600</li>
                    <li>
                        <b>Final step</b>: the code point of UTF-8 sequence 0xf09f9880 is U+1F600
                    </li>
                </ul>
            </li>
        </ul>
        
        <h5 class="post-subtitle">Byte Order Mark (BOM)</h5>

        <p>The Byte Order Mark (BOM) in UTF-8 is represented by the Unicode code point U+FEFF. In UTF-8, this code point is encoded as the following three-byte sequence: <b>EF BB BF</b>. This sequence is placed at the beginning of a file or stream to indicate that the contents are encoded in UTF-8. UTF-8 has no Litte-Endian or Big-Endian variants.</p>

        <p>For example, Suppose we have a text file containing the string "Hello, World!" encoded in UTF-8. The file would start with the BOM sequence EF BB BF, followed by the UTF-8 encoding of the string:</p>

        <p><b>EF BB BF 48 65 6C 6C 6F 2C 20 57 6F 72 6C 64 21</b></p>

        <h5 class="post-subtitle">UTF-8 Encoding and Decoding Algorithm in Programming Languages</h5>

        <h6 class="post-subtitle">C Programming Language</h6>

        <p>In C programming language, the UTF-8 encoding and decoding algorithm look as follow:</p>

        <pre><code class="language-bash hljs">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;inttypes.h&gt;

typedef struct {
    char mask;    /* char data will be bitwise AND with this */
    char lead;    /* start bytes of current char in utf-8 encoded character */
    uint32_t beg; /* beginning of codepoint range */
    uint32_t end; /* end of codepoint range */
    int bits_stored; /* the number of bits from the codepoint that fits in char */
}utf_t;

utf_t * utf[] = {
    /*             mask        lead        beg      end       bits */
    [0] = &(utf_t){0b00111111, 0b10000000, 0,       0,        6    },
    [1] = &(utf_t){0b01111111, 0b00000000, 0000,    0177,     7    },
    [2] = &(utf_t){0b00011111, 0b11000000, 0200,    03777,    5    },
    [3] = &(utf_t){0b00001111, 0b11100000, 04000,   0177777,  4    },
    [4] = &(utf_t){0b00000111, 0b11110000, 0200000, 04177777, 3    },
            &(utf_t){0},
};

/* All lengths are in bytes */
int codepoint_len(const uint32_t cp); /* len of associated utf-8 char */
int utf8_len(const char ch);          /* len of utf-8 encoded char */

char *to_utf8(const uint32_t cp);
uint32_t to_cp(const char chr[4]);

int codepoint_len(const uint32_t cp)
{
    int len = 0;
    for(utf_t **u = utf; *u; ++u) {
        if((cp >= (*u)->beg) && (cp <= (*u)->end)) {
            break;
        }
        ++len;
    }
    if(len > 4) /* Out of bounds */
        exit(1);

    return len;
}

int utf8_len(const char ch)
{
    int len = 0;
    for(utf_t **u = utf; *u; ++u) {
        if((ch & ~(*u)->mask) == (*u)->lead) {
            break;
        }
        ++len;
    }
    if(len > 4) { /* Malformed leading byte */
        exit(1);
    }
    return len;
}

char *to_utf8(const uint32_t cp)
{
    static char ret[5];
    const int bytes = codepoint_len(cp);

    int shift = utf[0]->bits_stored * (bytes - 1);
    ret[0] = (cp >> shift & utf[bytes]->mask) | utf[bytes]->lead;
    shift -= utf[0]->bits_stored;
    for(int i = 1; i < bytes; ++i) {
        ret[i] = (cp >> shift & utf[0]->mask) | utf[0]->lead;
        shift -= utf[0]->bits_stored;
    }
    ret[bytes] = '\0';
    return ret;
}

uint32_t to_cp(const char chr[4])
{
    int bytes = utf8_len(*chr);
    int shift = utf[0]->bits_stored * (bytes - 1);
    uint32_t codep = (*chr++ & utf[bytes]->mask) << shift;

    for(int i = 1; i < bytes; ++i, ++chr) {
        shift -= utf[0]->bits_stored;
        codep |= ((char)*chr & utf[0]->mask) << shift;
    }

    return codep;
}

int main(void)
{
    const uint32_t *in, input[] = {0x0041, 0x00f6, 0x0416, 0x20ac, 0x1d11e, 0x0};

    printf("Character  Unicode  UTF-8 encoding (hex)\n");
    printf("----------------------------------------\n");

    char *utf8;
    uint32_t codepoint;
    for(in = input; *in; ++in) {
        utf8 = to_utf8(*in);
        codepoint = to_cp(utf8);
        printf("%s          U+%-7.4x", utf8, codepoint);

        for(int i = 0; utf8[i] && i < 4; ++i) {
            printf("%hhx ", utf8[i]);
        }
        printf("\n");
    }
    return 0;
}</code></pre>

        <p>Compile and run the program:</p>

        <pre><code class="language-bash hljs">gcc utf8.c && ./a.out</code></pre>

        <p>The output is as follows:</p>

        <pre><code class="language-bash hljs">Character  Unicode  UTF-8 encoding (hex)
----------------------------------------
A          U+0041   41
ö          U+00f6   c3 b6
Ж          U+0416   d0 96
€          U+20ac   e2 82 ac
𝄞          U+1d11e  f0 9d 84 9e</code></pre>
    </article>

    <div class="post-tags">
	<div class="title">Tags</div>
	<ul class="tags">
		
		<li><a href="https://hemimorphite.github.io/zh/tag/utf-8" class="tag">UTF-8</a></li>
		
		<li><a href="https://hemimorphite.github.io/zh/tag/unicode" class="tag">unicode</a></li>
		
		<li><a href="https://hemimorphite.github.io/zh/tag/algorithm" class="tag">algorithm</a></li>
		
		<li><a href="https://hemimorphite.github.io/zh/tag/encoding" class="tag">encoding</a></li>
		
		<li><a href="https://hemimorphite.github.io/zh/tag/decoding" class="tag">decoding</a></li>
		
		<li><a href="https://hemimorphite.github.io/zh/tag/c" class="tag">c</a></li>
		
		<li><a href="https://hemimorphite.github.io/zh/tag/byte-order-mark" class="tag">byte order mark</a></li>
		
	</ul>
</div>


    <div class="post-share">
    <div class="title">Share this post</div>
    <ul class="rounded-social-buttons">
        <li><a href="https://www.facebook.com/sharer/sharer.php?u=https://hemimorphite.github.io/2023/08/16/setup-fedora-server-38-as-a-dhcp-server/" class="social-button facebook"><i class="fab fa-facebook-f"></i></a></li>
        <li><a href="http://twitter.com/share?text=Hey+guys%2c+check+this+out!&amp;url=https://hemimorphite.github.io/2023/08/16/setup-fedora-server-38-as-a-dhcp-server/&amp;hashtags=qemu,linux,fedora 38,firewalld,DHCP" class="social-button twitter"><i class="fab fa-twitter"></i></a></li>
        <li><a href="https://www.linkedin.com/sharing/share-offsite/?url=https://hemimorphite.github.io/2023/08/16/setup-fedora-server-38-as-a-dhcp-server/" class="social-button linkedin"><i class="fab fa-linkedin"></i></a></li>
    </ul>
</div>
</div>

				<div class="container">
					<div class="row">
						<div class="col-md-6">
							<script type="text/javascript">
								atOptions = {
									'key' : '24dfaf1e2babad270db4c0eae11415cc',
									'format' : 'iframe',
									'height' : 60,
									'width' : 468,
									'params' : {}
								};
							</script>
							<script type="text/javascript" src="//www.topcreativeformat.com/24dfaf1e2babad270db4c0eae11415cc/invoke.js"></script>
						</div>
						<div class="col-md-6">
							<script type="text/javascript">
								atOptions = {
									'key' : '24dfaf1e2babad270db4c0eae11415cc',
									'format' : 'iframe',
									'height' : 60,
									'width' : 468,
									'params' : {}
								};
							</script>
							<script type="text/javascript" src="//www.topcreativeformat.com/24dfaf1e2babad270db4c0eae11415cc/invoke.js"></script>
						</div>
						<div class="col-md-6">
							<script type="text/javascript">
								atOptions = {
									'key' : '08760f2487e830ed5039902de4007bec',
									'format' : 'iframe',
									'height' : 250,
									'width' : 300,
									'params' : {}
								};
							</script>
							<script type="text/javascript" src="//www.topcreativeformat.com/08760f2487e830ed5039902de4007bec/invoke.js"></script>
						</div>
						<div class="col-md-6">
							<script type="text/javascript">
								atOptions = {
									'key' : '08760f2487e830ed5039902de4007bec',
									'format' : 'iframe',
									'height' : 250,
									'width' : 300,
									'params' : {}
								};
							</script>
							<script type="text/javascript" src="//www.topcreativeformat.com/08760f2487e830ed5039902de4007bec/invoke.js"></script>
						</div>
					</div>
				</div>
				<div id="disqus_thread"></div>
			</div>

			<div class="col-12" style="border-bottom:0.1rem solid #eee;margin-top:2rem;margin-bottom:5rem;"></div>
		</div>
	</div>
</section>

<section>
	<div class="container">
		<div class="row">
			<div class="col-12">
				<div class="section-heading d-flex align-items-center">  
					<h2>Related Posts</h2>
					<a href="https://hemimorphite.github.io/zh/" type="button" class="btn btn-all ms-auto">All posts <i class="fa-solid fa-arrow-right"></i></a>
				</div>
				<div class="related-posts">
					<div class="row">
						
						
						
						
						
						
						
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

		<section>
			<div class="container">
				<div class="row">
					<div class="col-md-6">
						<script async="async" data-cfasync="false" src="//pl23622823.highrevenuenetwork.com/82849ac901fcdf553b99a113d233ce38/invoke.js"></script>
						<div id="container-82849ac901fcdf553b99a113d233ce38"></div>
					</div>
					<div class="col-md-6">
						<script type="text/javascript">
							atOptions = {
								'key' : '08760f2487e830ed5039902de4007bec',
								'format' : 'iframe',
								'height' : 250,
								'width' : 300,
								'params' : {}
							};
						</script>
						<script type="text/javascript" src="//www.topcreativeformat.com/08760f2487e830ed5039902de4007bec/invoke.js"></script>
					</div>
				</div>
			</div>
		</section>

	    <footer>
			<div class="container">
				<div class="row">
					<div class="col-lg-12">
						<div class="copyright-text">
						<p>&copy; 2024 Copyright hemimorphite. All Rights Reserved</p>
						</div>
					</div>
				</div>
			</div>
		</footer>

		<script src="https://hemimorphite.github.io/assets/vendor/jquery/jquery.min.js"></script>
	    <script src="https://hemimorphite.github.io/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
	    <script src="https://hemimorphite.github.io/assets/vendor/highlight.js/js/highlight.min.js"></script>
		<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" integrity="sha384-hIoBPJpTUs74ddyc4bFZSM1TVlQDA60VBbJS0oA934VSz82sBx1X7kSx2ATBDIyd" crossorigin="anonymous"></script>
		<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>
	    <script>
			//<![CDATA[
			/* highlight.js | https://unpkg.com/highlightjs-badge@0.1.8/highlightjs-badge.min.js */
			"use strict";!function(e,o){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?o(e,!0):function(e){if(!e.document)throw new Error("A window with a document is required");return o(e)}:o(e)}("undefined"!=typeof window?window:this,function(y,e){if("boolean"!=typeof o)var o=!1;function t(e){var o,m={templateSelector:"#CodeBadgeTemplate",contentSelector:"body",loadDelay:0,copyIconClass:"fa fa-copy",copyIconContent:"",checkIconClass:"fa fa-check text-success",checkIconContent:"",onBeforeCodeCopied:null};function t(){m.loadDelay?setTimeout(n,loadDelay):n()}function n(){if(!document.querySelector(m.templateSelector)){var e=document.createElement("div");e.innerHTML=function(){for(var e=["<style>","@media print {","   .code-badge { display: none; }","}","    .code-badge-pre {","        position: relative;","    }","    .code-badge {","        display: flex;","        flex-direction: row;","        white-space: normal;","        background: transparent;","        background: #fff;","        color: #333;","        font-size: 0.875em;","        opacity: 0.5;","        transition: opacity linear 0.5s;","        border-radius: 0 0 0 7px;","        padding: 5px 8px 5px 8px;","        position: absolute;","        right: 0;","        top: 0;","    }","    .code-badge.active {","        opacity: 0.8;","    }","","    .code-badge:hover {","        opacity: .95;","    }","","    .code-badge a,","    .code-badge a:hover {","        text-decoration: none;","    }","","    .code-badge-language {","        margin-right: 10px;","        font-weight: 600;","        color: goldenrod;","    }","    .code-badge-copy-icon {","        font-size: 1.2em;","        cursor: pointer;","        padding: 0 7px;","    }","    .fa.text-success:{ color: limegreen !important }","</style>",'<div id="CodeBadgeTemplate" style="display:none">','    <div class="code-badge">','        <div class="code-badge-language" ></div>','        <div  title="Copy to clipboard">','            <i class=" code-badge-copy-icon"></i></i></a>',"        </div>","     </div>","</div>"],o="",t=0;t<e.length;t++)o+=e[t]+"\n";return o}();var o=e.querySelector("style"),t=e.querySelector(m.templateSelector);document.body.appendChild(o),document.body.appendChild(t)}for(var n=document.querySelector(m.templateSelector).innerHTML,c=document.querySelectorAll("pre>code.hljs"),a=0;a<c.length;a++){var r=c[a];if(!r.querySelector(".code-badge")){for(var d="",l=0;l<r.classList.length;l++){var i=r.classList[l];if("language-"===i.substr(0,9)){d=r.classList[l].replace("language-","");break}if("lang-"===i.substr(0,5)){d=r.classList[l].replace("lang-","");break}if(!d)for(var s=0;s<r.classList.length;s++)if("hljs"!=r.classList[s]){d=r.classList[s];break}}"ps"==(d=d?d.toLowerCase():"text")?d="powershell":"cs"==d?d="csharp":"js"==d?d="javascript":"ts"==d?d="typescript":"fox"==d&&(d="foxpro");var p=n.replace("",d).replace("",m.copyIconClass).trim(),u=document.createElement("div");u.innerHTML=p,u=u.querySelector(".code-badge");var g=r.parentElement;g.classList.add("code-badge-pre"),m.copyIconContent&&(u.querySelector(".code-badge-copy-icon").innerText=m.copyIconContent),g.insertBefore(u,r)}}document.querySelector(m.contentSelector).addEventListener("click",function(e){return e.srcElement.classList.contains("code-badge-copy-icon")&&(e.preventDefault(),e.cancelBubble=!0,function(e){var o=e.srcElement.parentElement.parentElement.parentElement,t=o.querySelector("pre>code"),n=t.textContent||t.innerText;m.onBeforeCodeCopied&&(n=m.onBeforeCodeCopied(n,t));var c=document.createElement("textarea");c.value=n.trim(),document.body.appendChild(c),c.style.display="block",y.document.documentMode?c.setSelectionRange(0,c.value.length):c.select();document.execCommand("copy"),document.body.removeChild(c),function(e){var o=m.copyIconClass.split(" "),t=m.checkIconClass.split(" "),n=e.querySelector(".code-badge-copy-icon");n.innerText=m.checkIconContent;for(var c=0;c<o.length;c++)n.classList.remove(o[c]);for(c=0;c<t.length;c++)n.classList.add(t[c]);setTimeout(function(){n.innerText=m.copyIconContent;for(var e=0;e<t.length;e++)n.classList.remove(t[e]);for(e=0;e<o.length;e++)n.classList.add(o[e])},2e3)}(o)}(e)),!1})}o=e,Object.assign(m,o),"loading"==document.readyState?document.addEventListener("DOMContentLoaded",t):t()}y.highlightJsBadge=t,y.module&&y.module.exports&&(y.module.exports.highlightJsBadge=t),o&&t()});   
			//]]>
		</script>

	    <!-- Additional Scripts -->
	    <script src="https://hemimorphite.github.io/assets/js/custom.js"></script>
	    <script>
	    	let url = new URL("https://hemimorphite.github.io/zh/2024/06/22/utf-8-encoding-and-decoding-algorithm/");
			let paths = url.pathname.split('/').slice(1);

		    /**
		    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
		    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
		    if(typeof paths[3] !== 'undefined') {
		    	var disqus_config = function () {
				    this.page.url = "https://hemimorphite.github.io/zh/2024/06/22/utf-8-encoding-and-decoding-algorithm/";  // Replace PAGE_URL with your page's canonical URL variable
				    this.page.identifier = btoa(paths[3]); // Replace PAGE_IDENTIFIER with your page's unique identifier variable
			    };
			    
			    (function() { // DON'T EDIT BELOW THIS LINE
			    var d = document, s = d.createElement('script');
			    s.src = 'https://hemimorphite-github-io.disqus.com/embed.js';
			    s.setAttribute('data-timestamp', +new Date());
			    (d.head || d.body).appendChild(s);
			    })();	
		    }
		    
		</script>
	    <script id="dsq-count-scr" src="https://hemimorphite-github-io.disqus.com/count.js" async></script>
		
  	</body>
</html>