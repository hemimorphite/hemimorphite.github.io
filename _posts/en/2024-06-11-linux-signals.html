---
layout: post
lang: en
locale: en
title: "Linux Signals"
thumb: "clinux.jpg"
eyebrow: "Tutorial"
description: "Linux signals are a fundamental feature of the Linux operating system that allow processes to communicate with each other. This article explains how signals work in Linux and how they can be utilized."
date: 2024-06-11 22:20:00 +0700
author: Samuel Yang
categories: ["Tutorials", "year-2024", "month-06", "day-11"]
tags: ["linux", "signal", "c"]
---

<div class="blog-post">
    {% include post-header.html %}

    <article class="post-content">
        <p>Signals are interruptions that are generated by the software and give us a way of handling asynchronous events. Those interruptions can be generated by things outside the process (like Ctrl+C from the user in the terminal) or from errors inside the process (like a math error for dividing with 0).</p>

        <p>There are 31 standard signals, numbered 1-31. Each signal is named as "SIG" followed by a suffix. Starting from version 2.2, the Linux kernel supports 33 different real-time signals. These have numbers 32-64 but programmers should instead use SIGRTMIN+n notation. Standard signals have specific purposes but the use of SIGUSR1 and SIGUSR2 can be defined by applications. Real-time signals are also defined by applications.</p>

        <table class="table table-bordered border-primary">
            <thead>
                <tr>
                    <td><strong>Number</strong></td>
                    <td><strong>Name</strong></td>
                    <td><strong>Default Action</strong></td>
                    <td><strong>Description</strong></td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td><code>SIGHUP</code></td>
                    <td>Terminate</td>
                    <td>Terminal line hangup or parent process terminated</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td><code>SIGINT</code></td>
                    <td>Terminate</td>
                    <td>Interrupt from keyboard (<code>ctrl-c</code>)</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td><code>SIGQUIT</code></td>
                    <td>Terminate</td>
                    <td>Quit from keyboard (<code>ctrl-\</code>)</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td><code>SIGILL</code></td>
                    <td>Terminate</td>
                    <td>Illegal instruction</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td><code>SIGTRAP</code></td>
                    <td>Core</td>
                    <td>Trace trap</td>
                </tr>
                <tr>
                    <td>6</td>
                    <td><code>SIGABRT</code></td>
                    <td>Core</td>
                    <td>Signal from <code>abort</code> function</td>
                </tr>
                <tr>
                    <td>7</td>
                    <td><code>SIGBUS</code></td>
                    <td>Terminate</td>
                    <td>Bus error</td>
                </tr>
                <tr>
                    <td>8</td>
                    <td><code>SIGFPE</code></td>
                    <td>Core</td>
                    <td>Floating-point exception</td>
                </tr>
                <tr>
                    <td>9</td>
                    <td><code>SIGKILL</code></td>
                    <td>Terminate</td>
                    <td>Kill program</td>
                </tr>
                <tr>
                    <td>10</td>
                    <td><code>SIGUSR1</code></td>
                    <td>Terminate</td>
                    <td>User-defined signal 1</td>
                </tr>
                <tr>
                    <td>11</td>
                    <td><code>SIGSEGV</code></td>
                    <td>Core</td>
                    <td>Invalid memory reference (segfault)</td>
                </tr>
                <tr>
                    <td>12</td>
                    <td><code>SIGUSR2</code></td>
                    <td>Terminate</td>
                    <td>User-defined signal 2</td>
                </tr>
                <tr>
                    <td>13</td>
                    <td><code>SIGPIPE</code></td>
                    <td>Terminate</td>
                    <td>Write in pipe with no reader</td>
                </tr>
                <tr>
                    <td>14</td>
                    <td><code>SIGALRM</code></td>
                    <td>Terminate</td>
                    <td>Timer signal from <code>alarm</code> function</td>
                </tr>
                <tr>
                    <td>15</td>
                    <td><code>SIGTERM</code></td>
                    <td>Terminate</td>
                    <td>Software termination signal</td>
                </tr>
                <tr>
                    <td>16</td>
                    <td><code>SIGSTKFLT</code></td>
                    <td>Terminate</td>
                    <td>Stack fault on coprocessor</td>
                </tr>
                <tr>
                    <td>17</td>
                    <td><code>SIGCHLD</code></td>
                    <td>Ignore</td>
                    <td>Child process has stopped or terminated</td>
                </tr>
                <tr>
                    <td>18</td>
                    <td><code>SIGCONT</code></td>
                    <td>Ignore</td>
                    <td>Continue process if stopped</td>
                </tr>
                <tr>
                    <td>19</td>
                    <td><code>SIGSTOP</code></td>
                    <td>Stop</td>
                    <td>Stop signal not from terminal</td>
                </tr>
                <tr>
                    <td>20</td>
                    <td><code>SIGTSTP</code></td>
                    <td>Stop</td>
                    <td>Stop signal from terminal (<code>ctrl-z</code>)</td>
                </tr>
                <tr>
                    <td>21</td>
                    <td><code>SIGTTIN</code></td>
                    <td>Stop</td>
                    <td>Background process read from terminal</td>
                </tr>
                <tr>
                    <td>22</td>
                    <td><code>SIGTTOU</code></td>
                    <td>Stop</td>
                    <td>Background process wrote to terminal</td>
                </tr>
                <tr>
                    <td>23</td>
                    <td><code>SIGURG</code></td>
                    <td>Ignore</td>
                    <td>Urgent condition on socket</td>
                </tr>
                <tr>
                    <td>24</td>
                    <td><code>SIGXCPU</code></td>
                    <td>Terminate</td>
                    <td>CPU time limit exceeded</td>
                </tr>
                <tr>
                    <td>25</td>
                    <td><code>SIGXFSZ</code></td>
                    <td>Terminate</td>
                    <td>File size limit exceeded</td>
                </tr>
                <tr>
                    <td>26</td>
                    <td><code>SIGVTALRM</code></td>
                    <td>Terminate</td>
                    <td>Virtual timer expired</td>
                </tr>
                <tr>
                    <td>27</td>
                    <td><code>SIGPROF</code></td>
                    <td>Terminate</td>
                    <td>Profiling timer expired</td>
                </tr>
                <tr>
                    <td>28</td>
                    <td><code>SIGWINCH</code></td>
                    <td>Ignore</td>
                    <td>Window size changed</td>
                </tr>
                <tr>
                    <td>29</td>
                    <td><code>SIGIO</code></td>
                    <td>Terminate</td>
                    <td>I/O now possible on a descriptor</td>
                </tr>
                <tr>
                    <td>30</td>
                    <td><code>SIGPWR</code></td>
                    <td>Terminate</td>
                    <td>Power failure</td>
                </tr>
                <tr>
                    <td>31</td>
                    <td><code>SIGSYS</code></td>
                    <td>Terminate</td>
                    <td>Bad system call</td>
                </tr>
            </tbody>
        </table>


        <p>Signals can be delivered to a process at any time during its execution, launched by events like user actions, hardware exceptions, or even more inter-process communication.</p>

        <p>Signals can interrupt the normal flow of a process and require the process to handle or respond to the signal appropriately.</p>

        <p>Signals are delivered by the operating system to the target process.</p>

        <p>When a signal is generated, the operating system identifies the target process based on its process ID (PID).</p>
        
        <p>The operating system then interrupts the execution of the target process and delivers the signal by invoking the corresponding signal handler or performing the default action associated with the signal.</p>

        <p>Signals can be delivered by various sources, including the user, hardware exceptions, or other processes involved in inter-process communication.</p>

        <p>The delivery of signals involves coordination between the operating system and the target process.</p>
        
        <p>The operating system is responsible for identifying the target process, interrupting its execution, and delivering the signal, while the process handles the signal by executing the corresponding signal handler or default action.</p>

        <p>Here are some common default actions:</p>

        <ul>
            <li>Termination Signals<br>
                <ul>
                    <li><code>SIGINT</code> (Interrupt): The process is terminated. This signal is generated by pressing Ctrl+C.</li>
                </ul>
            </li>
            <li>Termination with Core Dump Signals<br>
                A core dump is a file that contains a snapshot of a program's memory at the time of a crash or termination due to a critical error. It includes information about memory, registers, and program state.<br>
                <ul>
                    <li><code>SIGQUIT</code> (Quit): The process is terminated. This signal is triggered by pressing Ctrl+\ on the keyboard. A core dump is generated.</li>
                    <li><code>SIGILL</code> (Illegal Instruction): The process is terminated with a core dump, indicating an illegal instruction.</li>
                    <li><code>SIGABRT</code> (Abort): The process is terminated with a core dump, usually when an internal error or inconsistency is detected.</li>
                    <li><code>SIGFPE</code> (Floating-Point Exception): The process is terminated with a core dump when a floating-point arithmetic exception occurs, such as division by zero.</li>
                    <li><code>SIGSEGV</code> (Segmentation Fault): The default action for this signal is to terminate the process and generate a core dump. It occurs when the program attempts to access a memory location that it is not allowed to access, such as accessing an invalid pointer or accessing memory that has not been allocated.</li>
                </ul>
            </li>
            <li>Ignored Signals<br>
                <ul>
                    <li><code>SIGCHLD</code> (Child Status Changed): The signal is ignored, indicating that the process does not want to be notified when child processes terminate.</li>
                    <li><code>SIGURG</code> (Urgent Condition on Socket): The signal is ignored, typically used for out-of-band data in socket communication.</li>
                </ul>
            </li>
            <li>Stop Signals<br>
                <ul>
                    <li><code>SIGSTOP</code> (Stop): The process is stopped (paused) and can be resumed later using SIGCONT.</li>
                    <li><code>SIGTSTP</code> (Terminal Stop): The process is stopped (paused) by the user, typically through the Ctrl+Z combination.</li>
                </ul>
            </li>
            <li>Continue Signal<br>
                <ul>
                    <li><code>SIGCONT</code> (Continue): The process is resumed after being stopped or paused.</li>
                </ul>
            </li>
        </ul>

        <p>The purpose of signals is multifaceted and serves several important functions:</p>

        <ul>
            <li>Notify processes about events or conditions<br>
                <ul>
                    <li>Example 1: for a user action, sending a SIGINT signal (Ctrl+C) to notify a process to terminate gracefully in response to a user interrupt.</li>
                    <li>Example 2: for a hardware exception, sending a SIGFPE signal, which indicates a floating-point arithmetic exception ( → division by zero).</li>
                </ul>
            </li>
            <li>Handle asynchronous events efficiently<br>
                <ul>
                    <li>Example: receiving a SIGALRM signal to handle a timer or alarm event, allowing the process to perform a specific action after a specified time interval.</li>
                </ul>
            </li>
            <li>Handle exceptional situations or errors<br>
                <ul>
                    <li>Example: catching a SIGSEGV signal (segmentation fault) to handle a memory access violation, enabling the process to log the error and gracefully recover or terminate.</li>
                </ul>
            </li>
            <li>Facilitate inter-process communication<br>
                <ul>
                    <li>Example: sending a SIGUSR1 signal from one process to another as a custom communication mechanism, indicating a request for specific actions or data exchange between the processes.</li>
                </ul>
            </li>
            <li>Enable graceful termination of processes<br>
                <ul>
                    <li>Example: receiving a SIGTERM signal to initiate a graceful termination process, allowing the process to perform cleanup tasks, release resources, and exit gracefully.</li>
                </ul>
            </li>
            <li>Allow for custom behavior in response to signals<br>
                <ul>
                    <li>Example: registering a signal handler for a custom signal, such as SIGUSR2, to define a specific action that the process should take when receiving that signal, tailored to the specific needs of the application.</li>
                </ul>
            </li>
        </ul>

        <p>To create a signal in C, you can use the <code>kill()</code> or <code>raise()</code> functions. To send a signal from one process to another process, you can use the <code>kill()</code> function. To send a signal to itself, a process can use the <code>raise()</code> function.</p>

        <p>Here's an example of using <code>kill()</code> to send a <code>SIGTERM</code> signal to a process with a specific PID:</p>

        
        <pre><code class="language-bash hljs">#include &lt;sys/types.h&gt;
#include &lt;signal.h&gt;

int main() 
{
    pid_t pid = 1234; /* Replace it with the target process ID */

    /* Send SIGTERM signal to the process */
    int result = kill(pid, SIGTERM);
    
    if (result == 0) 
    {
        printf("Signal successfully sent.\n");
    }
    else 
    {
        printf("Failed to send signal.\n");
    }
    
    return 0;
}</code></pre>

        <p>Here's an example of using raise() to send a SIGINT signal to the current process:</p>

        <pre><code class="language-bash hljs">#include &lt;signal.h&gt;

int main() 
{
    /* Send SIGINT signal to the current process */
    raise(SIGINT);
    
    return 0;
}</code></pre>
        
    </article>

    {% include post-tags.html %}

    {% include post-share.html %}
</div>