---
layout: post
lang: en
locale: en
title: "Git Refs, Git Heads and Git HEAD"
thumb: "git.jpg"
eyebrow: "Tutorial"
description: "Learn about Git Refs, Git Heads, and Git HEAD in version control systems. Understand the differences and how they can be used in your Git workflows. Explore the concepts of HEAD^ and HEAD~."
date: 2024-04-18 21:10:00 +0700
author: Samuel Yang
categories: ["Tutorials", "year-2024", "month-04", "day-18"]
tags: ["git", "github", "gitlab", "Git HEAD", "Git Refs", "Git Heads"]
---

<div class="blog-post">
    {% include post-header.html %}

    <article class="post-content">
        <p>In Git, a <b>ref</b> is a human readable name that references a Git commit ID. A <b>ref</b> is essentially a pointer to a commit. Examples of refs are Git branch names such as <code>main</code> and <code>dev</code>. Another example of refs are Git tags such as <code>v0.1</code> or <code>v0.2</code>. You can think of each of these as a variable name that points to a commit ID. The commit ID that a ref points to is dynamic so it can change over time.</p>

        <p>Refs are stored in a special hidden location in your Git repository at the path <code>.git/refs/</code>.</p>

        <p>In Git, a <b>head</b> is a <b>ref</b> that points to the tip (latest commit) of a branch. You can view your repository's heads in the path <code>.git/refs/heads/</code>. In this path you will find one file for each branch, and the content in each file will be the commit ID of the tip (most recent commit) of that branch.</p>

        <p>For example, there is literally a file called <code>main</code> in that path that contains the commit ID of the tip (most recent commit) of the <code>main</code> branch. When you make a new commit on a branch or pull commits from a remote, the head file for that branch is always updated to reflect the commit ID of the tip (most recent commit) of the branch. In this way, your branch name ref always stays in sync with the most recent commit at the tip of the branch.</p>

        <p>Git refs and Git heads are simply pointers to commits, in the form of text files where the file name represents the name of the ref/head and the content is the commit ID that the ref points to.</p>

        <p>HEAD is a special ref that points to the commit you are currently working on - the currently checked out commit in your Git working directory. By default, you'll view the tip of the <code>main</code> branch on a repository, unless the <code>main</code> branch of your repository has a different name. The tip of the <code>main</code> branch is the most recent commit on the <code>main</code> branch of your codebase.</p>

        <p>You can find out where HEAD points to by opening the <code>.git/HEAD</code> file in your repository:</p>

        <pre><code class="language-bash hljs">cat .git/HEAD</code></pre>

        <p>Normally you will get something like this (branch name):</p>

        <pre><code class="language-bash hljs">ref: refs/heads/main</code></pre>

        <p>Git HEADs can represent a particular commit in the history of a project. This is because Git lets you check out different points in a repository's history to view how your project has evolved.</p>

        <p>We can check out a specific commit using the checkout command.</p>

        <pre><code class="language-bash hljs">git checkout 82a31ec32441cd06daa5e0397a73f4159cdaad4b</code></pre>

        <p>This command will check out a commit from our repository's history. This makes the HEAD does not point to a branch, but instead points to a specific commit or it is called a detached HEAD state. This means we are viewing a commit rather than a branch.</p>

        <p>You will get a commit ID by opening the <code>.git/HEAD</code> file:</p>

        <pre><code class="language-bash hljs">82a31ec32441cd06daa5e0397a73f4159cdaad4b</code></pre>

        <p>You can fix detached HEAD in Git by switching branches</p>

        <pre><code class="language-bash hljs">git checkout main</code></pre>

        <p>In Git, you can use any of the signs caret(^) or tilde(~) to go backward.</p>

        <p>The tilde(~) sign refers to the first parent in the commit history. <code>HEAD~</code> is always the same as HEAD^, similarly <code>HEAD~~</code> is always the same as <code>HEAD^^</code>, and so on.</p>

        <p>The caret(^) sign refer to the nth parent in the commit history. <code>HEAD^</code> is equivalent to <code>HEAD^1</code>.</p>

        <p>Here is an illustration, by Jon Loeliger. Both commit nodes B and C are parents of commit node A. Parent commits are ordered left-to-right.</p>

        <pre><code class="language-bash hljs">G   H   I   J
\ /     \ /
 D   E   F
  \  |  / \
   \ | /   |
    \|/    |
     B     C
      \   /
       \ /
        A        


A =      = A^0
B = A^   = A^1     = A~1
C = A^2
D = A^^  = A^1^1   = A~2
E = B^2  = A^^2
F = B^3  = A^^3
G = A^^^ = A^1^1^1 = A~3
H = D^2  = B^^2    = A^^^2  = A~2^2
I = F^   = B^3^    = A^^3^
J = F^2  = B^3^2   = A^^3^2</code></pre>
    </article>

    {% include post-tags.html %}

    {% include post-share.html %}
</div>